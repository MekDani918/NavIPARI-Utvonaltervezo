import*as THREE from"https://cdn.skypack.dev/-/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/dist=es2020,mode=imports,min/optimized/three.js";import{OrbitControls}from"./OrbitControls.js";import{SVGLoader}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/loaders/SVGLoader.js";import{FontLoader}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/loaders/FontLoader.js";import{TextGeometry}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/geometries/TextGeometry.js";var mapDivWidth,mapDivHeight,_scene,_camera,_renderer,_controls,cube,_svg_loader,_guiData,FloorURLs=["./svg/001-foldszint.svg","./svg/002-emelet1.svg","./svg/003-emelet2.svg","./svg/004-I-epulet-padlaster.svg"],_Nodes=[],_Classrooms=[],isNewNodeMode=!1,lastZoomVal=0,EditedNode=null,isEditMode=!1,EditedNodeLastPos=null,EditedNeighbours=[],EditedClassroom=null,isCEditMode=!1,EditedAliases=[],_EdgeList=[];async function init(){updateWindowSize(),_scene=new THREE.Scene,_camera=new THREE.PerspectiveCamera(75,window.outerWidth/window.outerHeight,1,1e3),(_renderer=new THREE.WebGLRenderer).setSize(window.outerWidth,window.outerHeight),document.getElementById("mapDiv").appendChild(_renderer.domElement),_camera.position.z=200,_camera.lookAt(0,0,0),(_controls=new OrbitControls(_camera,_renderer.domElement)).addEventListener("change",moveNode),_controls.enableRotate=!1,_controls.minDistance=25,_controls.maxDistance=200,_controls.zoomSpeed=2,_controls.mouseButtons={LEFT:THREE.MOUSE.PAN,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN},_controls.touches={ONE:THREE.TOUCH.PAN,TWO:THREE.TOUCH.DOLLY_PAN},loadSVG((_guiData={currentURL:"./svg/001-foldszint.svg",currentFloor:{number:1,path:"./svg/001-foldszint.svg"},drawFillShapes:!0,drawStrokes:!0,fillShapesWireframe:!1,strokesWireframe:!1}).currentURL),document.getElementById("zoomBtnGroup").addEventListener("click",e=>{zoomModel("+"==e.target.value,.95*_controls.getZoomScale())}),window.requestAnimationFrame(animate),await createFloorBtns(),initCollapseBtns(),await initNodeList(),await initClassroomList(),initPanels()}function initCollapseBtns(){for(let e of document.getElementsByClassName("collapseBtnS"))e.addEventListener("click",toggleCollapse)}function toggleCollapse(){let e=document.getElementById("menuDiv");e.classList.contains("collapsed")?e.classList.remove("collapsed"):e.classList.add("collapsed")}async function initNodeList(){for(let e of _Nodes)_scene.remove(e.uiElement);_Nodes=[];let e=document.getElementById("NodeListContainer");e.innerHTML="";var t=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getNodes"})});for(let o of t){let t=createNodeCircle(o.POS_X,o.POS_Y,o.ID,16776960);_Nodes.push(new NODE(o.ID,t,o.FLOOR,1==o.IS_STAIR,o.NEIGHBOURS)),_guiData.currentFloor.number==o.FLOOR&&(e.appendChild(createNodeListEntry(_Nodes[_Nodes.length-1])),_scene.add(t))}updateEdges()}function updateEdges(){for(let e of _EdgeList)_scene.remove(e);let e=[];for(let t of _Nodes)if(t.floorId==_guiData.currentFloor.number)for(let o of t.neighbourList){let i=_Nodes.find(e=>e.id==o);if(!(i.floorId!=_guiData.currentFloor.number||e[t.id]&&e[t.id].includes(o)||e[o]&&e[o].includes(t.id))){let d=new THREE.Vector3(t.uiElement.position.x,t.uiElement.position.y,.1),n=new THREE.Vector3(i.uiElement.position.x,i.uiElement.position.y,.1),s=(new THREE.BufferGeometry).setFromPoints([d,n]),l=new THREE.LineBasicMaterial({color:16711680}),a=new THREE.Line(s,l);_scene.add(a),_EdgeList.push(a),e[t.id]||(e[t.id]=[]),e[t.id].push(o)}}}async function initClassroomList(){var e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getRooms"})});for(let t of e){let e=new CLASSROOM(t.ID,t.NAME,t.ALIASES);e.node_id=t.NODE_ID,_Nodes.findIndex(e=>e.id==t.NODE_ID&&e.floorId==_guiData.currentFloor.number)>=0&&document.getElementById(`RC${e.node_id}`).appendChild(e.uiListElement),_Classrooms.push(e)}updateNodeColors()}function initNodeNeighboursList(){let e=document.getElementById("newNodeNeighbours");e.innerHTML="";let t=document.createElement("option");t.innerHTML="",t.value=-1,e.appendChild(t);for(let o of _Nodes)EditedNode&&o.id==EditedNode.id||o.floorId!=_guiData.currentFloor.number||((t=document.createElement("option")).innerHTML=o.id,t.value=o.id,e.appendChild(t));let o=document.getElementById("newNodeNeighbourList");o.innerHTML="";for(let e of EditedNeighbours)o.appendChild(createLIelement(e,e,removeLIelement))}function initClassroomNodeList(){let e=document.getElementById("newClassroomNode");e.innerHTML="";for(let t of _Nodes)if(t.floorId==_guiData.currentFloor.number){let o=document.createElement("option");o.innerHTML=t.id,o.value=t.id,e.appendChild(o)}if(null!=EditedClassroom){let e=document.getElementById("newClassroomAliasList");e.innerHTML="";for(let t of EditedAliases)e.appendChild(createLIelement(t,t,removeRoomLIelement))}}function createNodeListEntry(e){let t=document.createElement("div");t.classList="col-12 p-3 my-2 bg-warning rounded nodeList-item c-pointer",t.id=`N${e.id}`,t.addEventListener("click",editNode);let o=document.createElement("p");o.classList="p-1 m-0 user-select-none nodeList-item-textcontainer";let i=document.createElement("span");i.innerHTML=`${e.id}:`,i.classList="float-start fw-bold nodeList-item-text";let d=document.createElement("span");d.innerHTML=`${e.posX} ${e.posY}`,d.classList="fst-italic nodeList-item-text";let n=document.createElement("div");return n.classList="row text-center",n.id=`RC${e.id}`,i.addEventListener("click",editNode),d.addEventListener("click",editNode),o.appendChild(i),o.appendChild(d),t.appendChild(o),t.appendChild(n),t}function createNodeCircle(e,t,o,i){var d=new THREE.CircleGeometry(2,16),n=new THREE.MeshBasicMaterial({color:i}),s=new THREE.Mesh(d,n);return s.position.x=e,s.position.y=t,s.position.z=.25,s.name=o,createLabel(o,s,s,!0),s}function loadSVG(e){(_scene=new THREE.Scene).background=new THREE.Color(11579568),(_svg_loader=new SVGLoader).load(e,function(e){const t=e.paths,o=new THREE.Group;o.scale.multiplyScalar(.5),o.scale.y*=-1;for(let e=0;e<t.length;e++){const i=t[e],d=i.userData.style.fill;if(_guiData.drawFillShapes&&void 0!==d&&"none"!==d){const e=new THREE.MeshBasicMaterial({color:(new THREE.Color).setStyle(d),opacity:i.userData.style.fillOpacity,transparent:i.userData.style.fillOpacity<1,side:THREE.DoubleSide,depthWrite:!1,wireframe:_guiData.fillShapesWireframe}),t=SVGLoader.createShapes(i);for(let d=0;d<t.length;d++){const n=t[d],s=new THREE.ShapeGeometry(n),l=new THREE.Mesh(s,e);if(""!=i.userData.node.id){createLabel(i.userData.node.id.split("_x3B_")[0].replaceAll("_x2C_",",").replaceAll("_x28_","(").replaceAll("_x29_",")").replace(/_[0-9]*_/,"").replaceAll("_"," "),l,o)}o.add(l)}}const n=i.userData.style.stroke;if(_guiData.drawStrokes&&void 0!==n&&"none"!==n){const e=new THREE.MeshBasicMaterial({color:(new THREE.Color).setStyle(n),opacity:i.userData.style.strokeOpacity,transparent:i.userData.style.strokeOpacity<1,side:THREE.DoubleSide,depthWrite:!1,wireframe:_guiData.strokesWireframe});for(let t=0,d=i.subPaths.length;t<d;t++){const d=i.subPaths[t],n=SVGLoader.pointsToStroke(d.getPoints(),i.userData.style);if(n){const t=new THREE.Mesh(n,e);o.add(t)}}}}(new THREE.Box3).setFromObject(o).getCenter(o.position).multiplyScalar(-1),_scene.add(o),setTimeout(()=>{document.getElementById("loadingSc").classList.add("hideLoading"),setTimeout(()=>{document.getElementById("loadingSc").style.display="none"},250)},250),_scene.add(o)})}function createLabel(e,t,o,i=!1){(new FontLoader).load("./fonts/Open Sans_Regular.json",function(d){const n=new TextGeometry(e,{font:d,size:5,height:1,curveSegments:10,bevelEnabled:!1,bevelOffset:0,bevelSegments:1,bevelSize:.3,bevelThickness:1}),s=[new THREE.MeshPhongMaterial({color:16737792}),new THREE.MeshPhongMaterial({color:255})];var l=new THREE.Mesh(n,s);l.castShadow=!1;var a=t.geometry;a.computeBoundingBox();var r=l.geometry;r.computeBoundingBox();let m=new THREE.Vector3;a.boundingBox.getSize(m);let c=new THREE.Vector3;if(r.boundingBox.getSize(c),i){let e;e=c.x>c.y?Math.floor(m.x/c.x*1e3)/1150:Math.floor(m.y/c.y*1e3)/1250,l.scale.x*=e,l.scale.y*=e,(r=l.geometry).computeBoundingBox(),r.boundingBox.getSize(c);let t=Math.abs(m.x-c.x)/2,i=(m.y-c.y)/2;return l.position.x-=c.x*e/2,l.position.x-=t/8,l.position.y-=c.y*e/2,l.position.y-=i/8,l.scale.z=.1,void o.add(l)}var u=new THREE.Vector3;a.boundingBox.getCenter(u);var E=r.boundingBox.min,p=r.boundingBox.max;if(l.position.x=u.x,l.position.x-=(p.x-E.x)/2,l.position.y=u.y,l.position.y+=(p.y-E.y)/3,l.scale.y*=-1,l.scale.z=.1,m.x<c.x)if(l.position.x=u.x,l.position.y=u.y,m.x<m.y)if(l.rotation.z=Math.PI/2,m.y<c.x){let e=Math.floor(m.y/c.x*10)/10.25;l.scale.x*=e,l.scale.y*=e,l.position.x-=(p.y-E.y)*e/3,l.position.y-=(p.x-E.x)*e/2}else l.position.x-=(p.y-E.y)/3,l.position.y-=(p.x-E.x)/2;else{let e=Math.floor(m.x/c.x*10)/10.25;l.scale.x*=e,l.scale.y*=e,l.position.x-=(p.x-E.x)*e/2,l.position.y+=(p.y-E.y)*e/3}o.add(l)})}function zoomModel(e,t){e?_controls.dollyIn(t):_controls.dollyOut(t)}function animate(){_controls.update(),_renderer.render(_scene,_camera),window.requestAnimationFrame(animate)}function onWindowResize(){updateWindowSize(),_camera.aspect=window.outerWidth/window.outerHeight,_camera.updateProjectionMatrix(),_renderer.setSize(window.outerWidth,window.outerHeight),resizePanels()}function updateWindowSize(){mapDivWidth=window.innerWidth,mapDivHeight=window.innerHeight}function resizePanels(){if(updateWindowSize(),mapDivWidth<=767.98){let e=document.getElementById("newNodePanel");e.classList.remove("w-25"),e.classList.add("w-100"),(e=document.getElementById("newClassroomPanel")).classList.remove("w-25"),e.classList.add("w-100")}else{let e=document.getElementById("newNodePanel");e.classList.remove("w-100"),e.classList.add("w-25"),(e=document.getElementById("newClassroomPanel")).classList.remove("w-100"),e.classList.add("w-25")}}async function createFloorBtns(){FloorURLs=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getFloors"})});let e=document.getElementById("floorBtnGroup");for(let t in FloorURLs){let o=document.createElement("button");o.value=t,o.innerHTML=FloorURLs[t].number,o.classList="btn text-dark btn-floor",1==FloorURLs[t].number&&o.classList.add("active"),o.addEventListener("click",changeFloor),e.appendChild(o)}}async function changeFloor(e){if(FloorURLs[e.target.value].path!=_guiData.currentURL&&(document.getElementById("loadingSc").style.display="block",document.getElementById("loadingSc").classList.remove("hideLoading"),_controls.reset(),FloorURLs[e.target.value].path!=_guiData.currentURL)){_guiData.currentFloor=FloorURLs[e.target.value],_guiData.currentURL=_guiData.currentFloor.path,loadSVG(_guiData.currentURL);for(let t of document.querySelectorAll(".btn-floor"))t.classList.remove("active"),t.value==e.target.value&&t.classList.add("active");await initNodeList(),await initClassroomList()}}function addNewNode(){if(null!=EditedNode||null!=EditedClassroom)return;document.getElementById("newNodeNeighbours").innerHTML="",document.getElementById("isStairInput").checked=!1,initNodeNeighboursList(),updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newNodePanel").style.display="block",document.getElementById("newClassroomPanel").style.display="none";var e=new THREE.Vector3;e.copy(_camera.position);let t=createNodeCircle(e.x,e.y,"",16711680);EditedNode=new NODE(-1,t,_guiData.currentFloor.number),_scene.add(t)}function moveNode(){if(null!=EditedNode){var e=new THREE.Vector3;e.copy(_camera.position),EditedNode.uiElement.position.x=e.x,EditedNode.uiElement.position.y=e.y}}async function saveNewNode(){if(EditedNode.isStair=document.getElementById("isStairInput").checked,isEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"updateNode",id:EditedNode.id,posX:EditedNode.posX,posY:EditedNode.posY,isStair:EditedNode.isStair,neighbours:EditedNeighbours})});if(e.error)return void console.error(e.error);isEditMode=!1}else{let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"addNode",posX:EditedNode.posX,posY:EditedNode.posY,floorId:EditedNode.floorId,isStair:EditedNode.isStair,neighbours:EditedNeighbours})});if(e.error)return void console.error(e.error);if(!e.id)return void console.error("Valami nem jó");EditedNode.id=e.id,document.getElementById("NodeListContainer").appendChild(createNodeListEntry(EditedNode)),_Nodes.push(EditedNode)}EditedNode.neighbourList=EditedNeighbours.map(e=>e);for(let e of _Nodes)e.id!=EditedNode.id&&(EditedNode.neighbourList.includes(e.id)&&!e.neighbourList.includes(EditedNode.id)&&e.neighbourList.push(EditedNode.id),e.neighbourList.includes(EditedNode.id)&&!EditedNode.neighbourList.includes(e.id)&&e.neighbourList.splice(e.neighbourList.findIndex(e=>e==EditedNode.id),1));EditedNode.uiElement.material.color.setHex(16776960),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[],updateEdges(),updateNodeColors()}async function deleteNode(){if(isEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"delNode",id:EditedNode.id})});if(e.error)return void console.error(e.error);document.getElementById("NodeListContainer").removeChild(document.getElementById(`N${EditedNode.id}`));for(let e of _Nodes)e.neighbourList.includes(EditedNode.id)&&e.neighbourList.splice(e.neighbourList.findIndex(e=>e==EditedNode.id),1);_Nodes.splice(_Nodes.findIndex(e=>e==EditedNode),1),isEditMode=!1}_scene.remove(EditedNode.uiElement),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[],updateEdges()}function editNode(e){if(null!=EditedNode||null!=EditedClassroom)return;let t;e.target.classList.contains("nodeList-item")?t=e.target.id.substr(1):e.target.classList.contains("nodeList-item-textcontainer")?t=e.target.parentElement.id.substr(1):e.target.classList.contains("nodeList-item-text")&&(t=e.target.parentElement.parentElement.id.substr(1));for(let e of _Nodes)if(e.id==t){let t=_controls.getZoom();isEditMode=!0,(EditedNodeLastPos=new THREE.Vector3).copy(e.uiElement.position),document.getElementById("newNodeNeighbours").innerHTML="",EditedNeighbours=e.neighbourList.map(e=>e),EditedNode=e,e.uiElement.material.color.setHex(16711680);var o=new THREE.Vector3(e.posX,e.posY,0);return _controls.target.set(o.x,o.y,o.z),_camera.position.set(o.x,o.y,200),initNodeNeighboursList(),updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newNodePanel").style.display="block",document.getElementById("newClassroomPanel").style.display="none",document.getElementById("isStairInput").checked=EditedNode.isStair,isStairChange(),void _controls.dollyIn(t)}}function addNewClassroom(){null==EditedNode&&null==EditedClassroom&&(initClassroomNodeList(),document.getElementById("newClassroomName").value="",document.getElementById("newClassroomAlias").value="",document.getElementById("newClassroomAliasList").innerHTML="",updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newClassroomPanel").style.display="block",document.getElementById("newNodePanel").style.display="none",EditedClassroom=new CLASSROOM("-1","temproom"))}async function saveNewClassroom(){let e=document.getElementById("newClassroomName"),t=document.getElementById("newClassroomNode");if(null!=e.value&&""!=e.value&&!(_Nodes.findIndex(e=>e.id==t.value)<0)){if(isCEditMode){let o=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"updateRoom",id:EditedClassroom.id,name:e.value,nodeid:t.value,aliaslist:EditedAliases})});if(o.error)return void console.error(o.error);EditedClassroom.node_id!=t.value&&(document.getElementById(`RC${t.value}`).appendChild(EditedClassroom.uiListElement),EditedClassroom.node_id=t.value),EditedClassroom.name!=e.value&&(EditedClassroom.name=e.value),isCEditMode=!1}else{let o=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"addRoom",name:e.value,nodeid:t.value,aliaslist:EditedAliases})});if(o.error)return void console.error(o.error);if(!o.id)return void console.error("Valami nem jó");(EditedClassroom=new CLASSROOM(o.id,e.value,EditedAliases)).node_id=t.value,document.getElementById(`RC${EditedClassroom.node_id}`).appendChild(EditedClassroom.uiListElement),_Classrooms.push(EditedClassroom)}EditedClassroom.aliasList=EditedAliases,document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[],updateNodeColors()}}async function deleteClassroom(){if(isCEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"delRoom",id:EditedClassroom.id})});if(e.error)return void console.error(e.error);let t=document.getElementById(`R${EditedClassroom.id}`);t.parentElement.removeChild(t),_Classrooms.splice(_Classrooms.findIndex(e=>e==EditedClassroom),1),isCEditMode=!1}document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[]}function editClassroom(e){if(null!=EditedNode||null!=EditedClassroom)return;let t;t=e.target.classList.contains("roomList-item-text")?e.target.parentElement.id.substr(1):e.target.id.substr(1);for(let e of _Classrooms)if(e.id==t){isCEditMode=!0,EditedClassroom=e,EditedAliases=e.aliasList,document.getElementById("newClassroomName").value=e.name;let t=document.getElementById("newClassroomNode");t.innerHTML="",initClassroomNodeList(),document.getElementById("newClassroomAlias").value="";for(let e in t.children)t.children[e].value==EditedClassroom.node_id&&(t.selectedIndex=e);return updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),void(document.getElementById("newClassroomPanel").style.display="block")}}function updateNodeColors(){for(let e of _Nodes)e.uiElement.material.color.setHex(16776960);for(let e of _Classrooms)_Nodes.find(t=>t.id==e.node_id).uiElement.material.color.setHex(15832598)}function createLIelement(e,t,o){let i=document.createElement("li");return i.classList="list-group-item",i.innerHTML=e,i.setAttribute("value",t),i.addEventListener("click",o),i}function removeLIelement(e){EditedNeighbours.splice(EditedNeighbours.findIndex(t=>t==e.target.value),1),document.getElementById("newNodeNeighbourList").removeChild(e.target)}function removeRoomLIelement(e){EditedAliases.splice(EditedAliases.findIndex(t=>t==e.target.getAttribute("value")),1),document.getElementById("newClassroomAliasList").removeChild(e.target)}function initPanels(){document.getElementById("newClassroomAddAlias").addEventListener("click",()=>{let e=document.getElementById("newClassroomAliasList"),t=document.getElementById("newClassroomAlias");null!=t.value&&""!=t.value&&(EditedAliases.push(t.value),e.appendChild(createLIelement(t.value,t.value,removeRoomLIelement)))}),document.getElementById("newNodeAddNeighbour").addEventListener("click",()=>{let e=document.getElementById("newNodeNeighbours");if(e.selectedIndex<=0)return;if(EditedNeighbours.includes(e.selectedOptions[0].value))return;let t=e[e.selectedIndex],o=document.getElementById("newNodeNeighbourList");EditedNeighbours.push(t.value),o.appendChild(createLIelement(t.innerHTML,t.value,removeLIelement))}),document.getElementById("addNode").addEventListener("click",addNewNode),document.getElementById("newNodePanelX").addEventListener("click",()=>{isEditMode?(EditedNode.uiElement.position.copy(EditedNodeLastPos),EditedNode.uiElement.material.color.setHex(16776960),isEditMode=!1,updateNodeColors()):_scene.remove(EditedNode.uiElement),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[]}),document.getElementById("addClassroom").addEventListener("click",addNewClassroom),document.getElementById("newClassroomPanelX").addEventListener("click",()=>{isCEditMode=!1,document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[]}),document.getElementById("addNewClassroom").addEventListener("click",saveNewClassroom),document.getElementById("deleteClassroom").addEventListener("click",deleteClassroom),document.getElementById("addNewNode").addEventListener("click",saveNewNode),document.getElementById("deleteNode").addEventListener("click",deleteNode),document.getElementById("isStairInput").addEventListener("change",isStairChange),resizePanels()}function isStairChange(){if(initNodeNeighboursList(),!document.getElementById("isStairInput").checked)return;let e=document.createElement("optgroup");e.label="Lépcsők";for(let t of _Nodes)if(t.isStair&&t.id!=EditedNode.id&&t.floorId!=_guiData.currentFloor.number){let o=document.createElement("option");o.innerHTML=t.id,o.value=t.id,e.appendChild(o)}document.getElementById("newNodeNeighbours").appendChild(e)}async function getData(e,t){let o;return o=t?await fetch(e,t):await fetch(e),await o.json()}window.addEventListener("resize",onWindowResize),window.addEventListener("load",init);class NODE{constructor(e,t,o,i=!1,d=[]){this.uiElement=t,this.uiElement.name=e,this.neighbourList=[];for(let e of d)this.neighbourList.push(e.ID);this.floorId=o,this.isStair=1==i}get posX(){return parseFloat(this.uiElement.position.x)}get posY(){return parseFloat(this.uiElement.position.y)}set id(e){this.uiElement.children.length>0&&this.uiElement.remove(this.uiElement.children[0]),createLabel(e,this.uiElement,this.uiElement,!0),this.uiElement.name=e}get id(){return this.uiElement.name}}class CLASSROOM{constructor(e,t,o=[]){this.uiListElement=document.createElement("div"),this.uiListElement.classList="col-12 bg-danger mt-1 p-1 rounded",this.uiListElement.id=`R${e}`,this.uiListElement.addEventListener("click",editClassroom);let i=document.createElement("span");i.classList="float-start fw-bold roomList-item-text",i.innerHTML=e;let d=document.createElement("span");d.classList="fst-italic roomList-item-text",d.innerHTML=t,this.uiListElement.appendChild(i),this.uiListElement.appendChild(d),this.id=e,this._NAME=t,this.aliasList=[];for(let e of o)this.aliasList.push(e.ALIAS);this.node_id=null}get name(){return this._NAME}set name(e){this._NAME=e,this.uiListElement.children[1].innerHTML=e}}