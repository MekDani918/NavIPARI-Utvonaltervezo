import*as e from"https://cdn.skypack.dev/-/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/dist=es2020,mode=imports,min/optimized/three.js";import{OrbitControls as t}from"./OrbitControls.js";import{SVGLoader as i}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/loaders/SVGLoader.js";import{FontLoader as o}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/loaders/FontLoader.js";import{TextGeometry as d}from"https://cdn.skypack.dev/pin/three@v0.135.0-pjGUcRG9Xt70OdXl97VF/mode=imports,min/unoptimized/examples/jsm/geometries/TextGeometry.js";var mapDivWidth,mapDivHeight,_scene,_camera,_renderer,_controls,cube,_svg_loader,_guiData,FloorURLs=["./svg/001-foldszint.svg","./svg/002-emelet1.svg","./svg/003-emelet2.svg","./svg/004-I-epulet-padlaster.svg"],_Nodes=[],_Classrooms=[],isNewNodeMode=!1,lastZoomVal=0,EditedNode=null,isEditMode=!1,EditedNodeLastPos=null,EditedNeighbours=[],EditedClassroom=null,isCEditMode=!1,EditedAliases=[],_EdgeList=[];async function init(){updateWindowSize(),_scene=new e.Scene,_camera=new e.PerspectiveCamera(75,window.outerWidth/window.outerHeight,1,1e3),(_renderer=new e.WebGLRenderer).setSize(window.outerWidth,window.outerHeight),document.getElementById("mapDiv").appendChild(_renderer.domElement),_camera.position.z=200,_camera.lookAt(0,0,0),(_controls=new t(_camera,_renderer.domElement)).addEventListener("change",moveNode),_controls.enableRotate=!1,_controls.minDistance=25,_controls.maxDistance=200,_controls.zoomSpeed=2,_controls.mouseButtons={LEFT:e.MOUSE.PAN,MIDDLE:e.MOUSE.DOLLY,RIGHT:e.MOUSE.PAN},_controls.touches={ONE:e.TOUCH.PAN,TWO:e.TOUCH.DOLLY_PAN},loadSVG((_guiData={currentURL:"./svg/001-foldszint.svg",currentFloor:{number:1,path:"./svg/001-foldszint.svg"},drawFillShapes:!0,drawStrokes:!0,fillShapesWireframe:!1,strokesWireframe:!1}).currentURL),document.getElementById("zoomBtnGroup").addEventListener("click",e=>{zoomModel("+"==e.target.value,.95*_controls.getZoomScale())}),window.requestAnimationFrame(animate),await createFloorBtns(),initCollapseBtns(),await initNodeList(),await initClassroomList(),initPanels()}function initCollapseBtns(){for(let e of document.getElementsByClassName("collapseBtnS"))e.addEventListener("click",toggleCollapse)}function toggleCollapse(){let e=document.getElementById("menuDiv");e.classList.contains("collapsed")?e.classList.remove("collapsed"):e.classList.add("collapsed")}async function initNodeList(){for(let e of _Nodes)_scene.remove(e.uiElement);_Nodes=[];let t=document.getElementById("NodeListContainer");t.innerHTML="";var i=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getNodes"})});for(let o of i){let d=createNodeCircle(o.POS_X,o.POS_Y,o.ID,16776960);_Nodes.push(new NODE(o.ID,d,o.FLOOR,1==o.IS_STAIR,o.NEIGHBOURS)),_guiData.currentFloor.number==o.FLOOR&&(t.appendChild(createNodeListEntry(_Nodes[_Nodes.length-1])),_scene.add(d))}updateEdges()}function updateEdges(){for(let t of _EdgeList)_scene.remove(t);let i=[];for(let o of _Nodes)if(o.floorId==_guiData.currentFloor.number)for(let d of o.neighbourList){let n=_Nodes.find(e=>e.id==d);if(n.floorId==_guiData.currentFloor.number&&!(i[o.id]&&i[o.id].includes(d))&&!(i[d]&&i[d].includes(o.id))){let s=new e.Vector3(o.uiElement.position.x,o.uiElement.position.y,.1),l=new e.Vector3(n.uiElement.position.x,n.uiElement.position.y,.1),a=new e.BufferGeometry().setFromPoints([s,l]),r=new e.LineBasicMaterial({color:16711680}),m=new e.Line(a,r);_scene.add(m),_EdgeList.push(m),i[o.id]||(i[o.id]=[]),i[o.id].push(d)}}}async function initClassroomList(){var e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getRooms"})});for(let t of e){let i=new CLASSROOM(t.ID,t.NAME,t.ALIASES);i.node_id=t.NODE_ID,_Nodes.findIndex(e=>e.id==t.NODE_ID&&e.floorId==_guiData.currentFloor.number)>=0&&document.getElementById(`RC${i.node_id}`).appendChild(i.uiListElement),_Classrooms.push(i)}updateNodeColors()}function initNodeNeighboursList(){let e=document.getElementById("newNodeNeighbours");e.innerHTML="";let t=document.createElement("option");for(let i of(t.innerHTML="",t.value=-1,e.appendChild(t),_Nodes))EditedNode&&i.id==EditedNode.id||i.floorId!=_guiData.currentFloor.number||((t=document.createElement("option")).innerHTML=i.id,t.value=i.id,e.appendChild(t));let o=document.getElementById("newNodeNeighbourList");for(let d of(o.innerHTML="",EditedNeighbours))o.appendChild(createLIelement(d,d,removeLIelement))}function initClassroomNodeList(){let e=document.getElementById("newClassroomNode");for(let t of(e.innerHTML="",_Nodes))if(t.floorId==_guiData.currentFloor.number){let i=document.createElement("option");i.innerHTML=t.id,i.value=t.id,e.appendChild(i)}if(null!=EditedClassroom){let o=document.getElementById("newClassroomAliasList");for(let d of(o.innerHTML="",EditedAliases))o.appendChild(createLIelement(d,d,removeRoomLIelement))}}function createNodeListEntry(e){let t=document.createElement("div");t.classList="col-12 p-3 my-2 bg-warning rounded nodeList-item c-pointer",t.id=`N${e.id}`,t.addEventListener("click",editNode);let i=document.createElement("p");i.classList="p-1 m-0 user-select-none nodeList-item-textcontainer";let o=document.createElement("span");o.innerHTML=`${e.id}:`,o.classList="float-start fw-bold nodeList-item-text";let d=document.createElement("span");d.innerHTML=`${e.posX} ${e.posY}`,d.classList="fst-italic nodeList-item-text";let n=document.createElement("div");return n.classList="row text-center",n.id=`RC${e.id}`,o.addEventListener("click",editNode),d.addEventListener("click",editNode),i.appendChild(o),i.appendChild(d),t.appendChild(i),t.appendChild(n),t}function createNodeCircle(t,i,o,d){var n=new e.CircleGeometry(2,16),s=new e.MeshBasicMaterial({color:d}),l=new e.Mesh(n,s);return l.position.x=t,l.position.y=i,l.position.z=.25,l.name=o,createLabel(o,l,l,!0),l}function loadSVG(t){(_scene=new e.Scene).background=new e.Color(11579568),(_svg_loader=new i).load(t,function(t){let o=t.paths,d=new e.Group;d.scale.multiplyScalar(.5),d.scale.y*=-1;for(let n=0;n<o.length;n++){let s=o[n],l=s.userData.style.fill;if(_guiData.drawFillShapes&&void 0!==l&&"none"!==l){let a=new e.MeshBasicMaterial({color:new e.Color().setStyle(l),opacity:s.userData.style.fillOpacity,transparent:s.userData.style.fillOpacity<1,side:e.DoubleSide,depthWrite:!1,wireframe:_guiData.fillShapesWireframe}),r=i.createShapes(s);for(let m=0;m<r.length;m++){let u=r[m],c=new e.ShapeGeometry(u),p=new e.Mesh(c,a);""!=s.userData.node.id&&createLabel(s.userData.node.id.split("_x3B_")[0].replaceAll("_x2C_",",").replaceAll("_x28_","(").replaceAll("_x29_",")").replace(/_[0-9]*_/,"").replaceAll("_"," "),p,d),d.add(p)}}let E=s.userData.style.stroke;if(_guiData.drawStrokes&&void 0!==E&&"none"!==E){let g=new e.MeshBasicMaterial({color:new e.Color().setStyle(E),opacity:s.userData.style.strokeOpacity,transparent:s.userData.style.strokeOpacity<1,side:e.DoubleSide,depthWrite:!1,wireframe:_guiData.strokesWireframe});for(let f=0,h=s.subPaths.length;f<h;f++){let y=s.subPaths[f],L=i.pointsToStroke(y.getPoints(),s.userData.style);if(L){let N=new e.Mesh(L,g);d.add(N)}}}}new e.Box3().setFromObject(d).getCenter(d.position).multiplyScalar(-1),_scene.add(d),setTimeout(()=>{document.getElementById("loadingSc").classList.add("hideLoading"),setTimeout(()=>{document.getElementById("loadingSc").style.display="none"},250)},250),_scene.add(d)})}function createLabel(t,i,n,s=!1){let l=new o;l.load("./fonts/Open Sans_Regular.json",function(o){let l=new d(t,{font:o,size:5,height:1,curveSegments:10,bevelEnabled:!1,bevelOffset:0,bevelSegments:1,bevelSize:.3,bevelThickness:1}),a=[new e.MeshPhongMaterial({color:16737792}),new e.MeshPhongMaterial({color:255})];var r=new e.Mesh(l,a);r.castShadow=!1;var m=i.geometry;m.computeBoundingBox();var u=r.geometry;u.computeBoundingBox();let c=new e.Vector3;m.boundingBox.getSize(c);let p=new e.Vector3;if(u.boundingBox.getSize(p),s){let E;E=p.x>p.y?Math.floor(c.x/p.x*1e3)/1150:Math.floor(c.y/p.y*1e3)/1250,r.scale.x*=E,r.scale.y*=E,(u=r.geometry).computeBoundingBox(),u.boundingBox.getSize(p);let g=Math.abs(c.x-p.x)/2,f=(c.y-p.y)/2;r.position.x-=p.x*E/2,r.position.x-=g/8,r.position.y-=p.y*E/2,r.position.y-=f/8,r.scale.z=.1,n.add(r);return}var h=new e.Vector3;m.boundingBox.getCenter(h);var y=u.boundingBox.min,L=u.boundingBox.max;if(r.position.x=h.x,r.position.x-=(L.x-y.x)/2,r.position.y=h.y,r.position.y+=(L.y-y.y)/3,r.scale.y*=-1,r.scale.z=.1,c.x<p.x){if(r.position.x=h.x,r.position.y=h.y,c.x<c.y){if(r.rotation.z=Math.PI/2,c.y<p.x){let N=Math.floor(c.y/p.x*10)/10.25;r.scale.x*=N,r.scale.y*=N,r.position.x-=(L.y-y.y)*N/3,r.position.y-=(L.x-y.x)*N/2}else r.position.x-=(L.y-y.y)/3,r.position.y-=(L.x-y.x)/2}else{let v=Math.floor(c.x/p.x*10)/10.25;r.scale.x*=v,r.scale.y*=v,r.position.x-=(L.x-y.x)*v/2,r.position.y+=(L.y-y.y)*v/3}}n.add(r)})}function zoomModel(e,t){e?_controls.dollyIn(t):_controls.dollyOut(t)}function animate(){_controls.update(),_renderer.render(_scene,_camera),window.requestAnimationFrame(animate)}function onWindowResize(){updateWindowSize(),_camera.aspect=window.outerWidth/window.outerHeight,_camera.updateProjectionMatrix(),_renderer.setSize(window.outerWidth,window.outerHeight),resizePanels()}function updateWindowSize(){mapDivWidth=window.innerWidth,mapDivHeight=window.innerHeight}function resizePanels(){if(updateWindowSize(),mapDivWidth<=767.98){let e=document.getElementById("newNodePanel");e.classList.remove("w-25"),e.classList.add("w-100"),(e=document.getElementById("newClassroomPanel")).classList.remove("w-25"),e.classList.add("w-100")}else{let t=document.getElementById("newNodePanel");t.classList.remove("w-100"),t.classList.add("w-25"),(t=document.getElementById("newClassroomPanel")).classList.remove("w-100"),t.classList.add("w-25")}}async function createFloorBtns(){FloorURLs=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"getFloors"})});let e=document.getElementById("floorBtnGroup");for(let t in FloorURLs){let i=document.createElement("button");i.value=t,i.innerHTML=FloorURLs[t].number,i.classList="btn text-dark btn-floor",1==FloorURLs[t].number&&i.classList.add("active"),i.addEventListener("click",changeFloor),e.appendChild(i)}}async function changeFloor(e){if(FloorURLs[e.target.value].path!=_guiData.currentURL&&(document.getElementById("loadingSc").style.display="block",document.getElementById("loadingSc").classList.remove("hideLoading"),_controls.reset(),FloorURLs[e.target.value].path!=_guiData.currentURL)){for(let t of(_guiData.currentFloor=FloorURLs[e.target.value],_guiData.currentURL=_guiData.currentFloor.path,loadSVG(_guiData.currentURL),document.querySelectorAll(".btn-floor")))t.classList.remove("active"),t.value==e.target.value&&t.classList.add("active");await initNodeList(),await initClassroomList()}}function addNewNode(){if(null!=EditedNode||null!=EditedClassroom)return;document.getElementById("newNodeNeighbours").innerHTML="",document.getElementById("isStairInput").checked=!1,initNodeNeighboursList(),updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newNodePanel").style.display="block",document.getElementById("newClassroomPanel").style.display="none";var t=new e.Vector3;t.copy(_camera.position);let i=createNodeCircle(t.x,t.y,"",16711680);EditedNode=new NODE(-1,i,_guiData.currentFloor.number),_scene.add(i)}function moveNode(){if(null!=EditedNode){var t=new e.Vector3;t.copy(_camera.position),EditedNode.uiElement.position.x=t.x,EditedNode.uiElement.position.y=t.y}}async function saveNewNode(){if(EditedNode.isStair=document.getElementById("isStairInput").checked,isEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"updateNode",id:EditedNode.id,posX:EditedNode.posX,posY:EditedNode.posY,isStair:EditedNode.isStair,neighbours:EditedNeighbours})});if(e.error){console.error(e.error);return}isEditMode=!1}else{let t=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"addNode",posX:EditedNode.posX,posY:EditedNode.posY,floorId:EditedNode.floorId,isStair:EditedNode.isStair,neighbours:EditedNeighbours})});if(t.error){console.error(t.error);return}if(!t.id){console.error("Valami nem j\xf3");return}EditedNode.id=t.id,document.getElementById("NodeListContainer").appendChild(createNodeListEntry(EditedNode)),_Nodes.push(EditedNode)}for(let i of(EditedNode.neighbourList=EditedNeighbours.map(e=>e),_Nodes))i.id!=EditedNode.id&&(EditedNode.neighbourList.includes(i.id)&&!i.neighbourList.includes(EditedNode.id)&&i.neighbourList.push(EditedNode.id),i.neighbourList.includes(EditedNode.id)&&!EditedNode.neighbourList.includes(i.id)&&i.neighbourList.splice(i.neighbourList.findIndex(e=>e==EditedNode.id),1));EditedNode.uiElement.material.color.setHex(16776960),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[],updateEdges(),updateNodeColors()}async function deleteNode(){if(isEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"delNode",id:EditedNode.id})});if(e.error){console.error(e.error);return}for(let t of(document.getElementById("NodeListContainer").removeChild(document.getElementById(`N${EditedNode.id}`)),_Nodes))t.neighbourList.includes(EditedNode.id)&&t.neighbourList.splice(t.neighbourList.findIndex(e=>e==EditedNode.id),1);_Nodes.splice(_Nodes.findIndex(e=>e==EditedNode),1),isEditMode=!1}_scene.remove(EditedNode.uiElement),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[],updateEdges()}function editNode(t){if(null!=EditedNode||null!=EditedClassroom)return;let i;for(let o of(t.target.classList.contains("nodeList-item")?i=t.target.id.substr(1):t.target.classList.contains("nodeList-item-textcontainer")?i=t.target.parentElement.id.substr(1):t.target.classList.contains("nodeList-item-text")&&(i=t.target.parentElement.parentElement.id.substr(1)),_Nodes))if(o.id==i){let d=_controls.getZoom();isEditMode=!0,(EditedNodeLastPos=new e.Vector3).copy(o.uiElement.position),document.getElementById("newNodeNeighbours").innerHTML="",EditedNeighbours=o.neighbourList.map(e=>e),EditedNode=o,o.uiElement.material.color.setHex(16711680);var n=new e.Vector3(o.posX,o.posY,0);_controls.target.set(n.x,n.y,n.z),_camera.position.set(n.x,n.y,200),initNodeNeighboursList(),updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newNodePanel").style.display="block",document.getElementById("newClassroomPanel").style.display="none",document.getElementById("isStairInput").checked=EditedNode.isStair,isStairChange(),_controls.dollyIn(d);return}}function addNewClassroom(){null==EditedNode&&null==EditedClassroom&&(initClassroomNodeList(),document.getElementById("newClassroomName").value="",document.getElementById("newClassroomAlias").value="",document.getElementById("newClassroomAliasList").innerHTML="",updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newClassroomPanel").style.display="block",document.getElementById("newNodePanel").style.display="none",EditedClassroom=new CLASSROOM("-1","temproom"))}async function saveNewClassroom(){let e=document.getElementById("newClassroomName"),t=document.getElementById("newClassroomNode");if(null!=e.value&&""!=e.value&&!(0>_Nodes.findIndex(e=>e.id==t.value))){if(isCEditMode){let i=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"updateRoom",id:EditedClassroom.id,name:e.value,nodeid:t.value,aliaslist:EditedAliases})});if(i.error){console.error(i.error);return}EditedClassroom.node_id!=t.value&&(document.getElementById(`RC${t.value}`).appendChild(EditedClassroom.uiListElement),EditedClassroom.node_id=t.value),EditedClassroom.name!=e.value&&(EditedClassroom.name=e.value),isCEditMode=!1}else{let o=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"addRoom",name:e.value,nodeid:t.value,aliaslist:EditedAliases})});if(o.error){console.error(o.error);return}if(!o.id){console.error("Valami nem j\xf3");return}(EditedClassroom=new CLASSROOM(o.id,e.value,EditedAliases)).node_id=t.value,document.getElementById(`RC${EditedClassroom.node_id}`).appendChild(EditedClassroom.uiListElement),_Classrooms.push(EditedClassroom)}EditedClassroom.aliasList=EditedAliases,document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[],updateNodeColors()}}async function deleteClassroom(){if(isCEditMode){let e=await getData("./php/API.php",{method:"POST",body:JSON.stringify({function:"delRoom",id:EditedClassroom.id})});if(e.error){console.error(e.error);return}let t=document.getElementById(`R${EditedClassroom.id}`);t.parentElement.removeChild(t),_Classrooms.splice(_Classrooms.findIndex(e=>e==EditedClassroom),1),isCEditMode=!1}document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[]}function editClassroom(e){if(null!=EditedNode||null!=EditedClassroom)return;let t;for(let i of(t=e.target.classList.contains("roomList-item-text")?e.target.parentElement.id.substr(1):e.target.id.substr(1),_Classrooms))if(i.id==t){isCEditMode=!0,EditedClassroom=i,EditedAliases=i.aliasList,document.getElementById("newClassroomName").value=i.name;let o=document.getElementById("newClassroomNode");for(let d in o.innerHTML="",initClassroomNodeList(),document.getElementById("newClassroomAlias").value="",o.children)o.children[d].value==EditedClassroom.node_id&&(o.selectedIndex=d);updateWindowSize(),mapDivWidth<=767.98&&toggleCollapse(),document.getElementById("newClassroomPanel").style.display="block";return}}function updateNodeColors(){for(let e of _Nodes)e.uiElement.material.color.setHex(16776960);for(let t of _Classrooms)_Nodes.find(e=>e.id==t.node_id).uiElement.material.color.setHex(15832598)}function createLIelement(e,t,i){let o=document.createElement("li");return o.classList="list-group-item",o.innerHTML=e,o.setAttribute("value",t),o.addEventListener("click",i),o}function removeLIelement(e){EditedNeighbours.splice(EditedNeighbours.findIndex(t=>t==e.target.value),1),document.getElementById("newNodeNeighbourList").removeChild(e.target)}function removeRoomLIelement(e){EditedAliases.splice(EditedAliases.findIndex(t=>t==e.target.getAttribute("value")),1),document.getElementById("newClassroomAliasList").removeChild(e.target)}function initPanels(){document.getElementById("newClassroomAddAlias").addEventListener("click",()=>{let e=document.getElementById("newClassroomAliasList"),t=document.getElementById("newClassroomAlias");null!=t.value&&""!=t.value&&(EditedAliases.push(t.value),e.appendChild(createLIelement(t.value,t.value,removeRoomLIelement)))}),document.getElementById("newNodeAddNeighbour").addEventListener("click",()=>{let e=document.getElementById("newNodeNeighbours");if(e.selectedIndex<=0||EditedNeighbours.includes(e.selectedOptions[0].value))return;let t=e[e.selectedIndex],i=document.getElementById("newNodeNeighbourList");EditedNeighbours.push(t.value),i.appendChild(createLIelement(t.innerHTML,t.value,removeLIelement))}),document.getElementById("addNode").addEventListener("click",addNewNode),document.getElementById("newNodePanelX").addEventListener("click",()=>{isEditMode?(EditedNode.uiElement.position.copy(EditedNodeLastPos),EditedNode.uiElement.material.color.setHex(16776960),isEditMode=!1,updateNodeColors()):_scene.remove(EditedNode.uiElement),document.getElementById("newNodePanel").style.display="none",EditedNode=null,EditedNeighbours=[]}),document.getElementById("addClassroom").addEventListener("click",addNewClassroom),document.getElementById("newClassroomPanelX").addEventListener("click",()=>{isCEditMode=!1,document.getElementById("newClassroomPanel").style.display="none",EditedClassroom=null,EditedAliases=[]}),document.getElementById("addNewClassroom").addEventListener("click",saveNewClassroom),document.getElementById("deleteClassroom").addEventListener("click",deleteClassroom),document.getElementById("addNewNode").addEventListener("click",saveNewNode),document.getElementById("deleteNode").addEventListener("click",deleteNode),document.getElementById("isStairInput").addEventListener("change",isStairChange),resizePanels()}function isStairChange(){if(initNodeNeighboursList(),!document.getElementById("isStairInput").checked)return;let e=document.createElement("optgroup");for(let t of(e.label="L\xe9pcsÅ‘k",_Nodes))if(t.isStair&&t.id!=EditedNode.id&&t.floorId!=_guiData.currentFloor.number){let i=document.createElement("option");i.innerHTML=t.id,i.value=t.id,e.appendChild(i)}document.getElementById("newNodeNeighbours").appendChild(e)}async function getData(e,t){let i;return await (i=t?await fetch(e,t):await fetch(e)).json()}window.addEventListener("resize",onWindowResize),window.addEventListener("load",init);class NODE{constructor(e,t,i,o=!1,d=[]){for(let n of(this.uiElement=t,this.uiElement.name=e,this.neighbourList=[],d))this.neighbourList.push(n.ID);this.floorId=i,this.isStair=!0==o}get posX(){return parseFloat(this.uiElement.position.x)}get posY(){return parseFloat(this.uiElement.position.y)}set id(e){this.uiElement.children.length>0&&this.uiElement.remove(this.uiElement.children[0]),createLabel(e,this.uiElement,this.uiElement,!0),this.uiElement.name=e}get id(){return this.uiElement.name}}class CLASSROOM{constructor(e,t,i=[]){this.uiListElement=document.createElement("div"),this.uiListElement.classList="col-12 bg-danger mt-1 p-1 rounded",this.uiListElement.id=`R${e}`,this.uiListElement.addEventListener("click",editClassroom);let o=document.createElement("span");o.classList="float-start fw-bold roomList-item-text",o.innerHTML=e;let d=document.createElement("span");for(let n of(d.classList="fst-italic roomList-item-text",d.innerHTML=t,this.uiListElement.appendChild(o),this.uiListElement.appendChild(d),this.id=e,this._NAME=t,this.aliasList=[],i))this.aliasList.push(n.ALIAS);this.node_id=null}get name(){return this._NAME}set name(e){this._NAME=e,this.uiListElement.children[1].innerHTML=e}}